(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2222:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>x});var l=a(5155),n=a(2115);let s="http://localhost:3001/goals";async function r(){let e=await fetch(s);if(!e.ok)throw Error("Failed to fetch goals from json-server");return e.json()}async function o(e){let t=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to create goal");return await t.json()}async function d(e,t){let a=await fetch("".concat(s,"/").concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok)throw Error("Failed to update goal");return await a.json()}async function i(e){if(!(await fetch("".concat(s,"/").concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete goal");return!0}function c(e){let{onGoalAdded:t,onGoalUpdate:a,editGoal:s,setEditGoal:r}=e,[i,c]=(0,n.useState)({name:"",targetAmount:"",category:"",deadline:""});(0,n.useEffect)(()=>{s&&(c({name:s.name,targetAmount:s.targetAmount,category:s.category,deadline:s.deadline}),window.scrollTo({top:0,behavior:"smooth"}))},[s]);let m=e=>{let{name:t,value:a}=e.target;c(e=>({...e,[t]:a}))},u=async e=>{e.preventDefault();let l={...i,targetAmount:Number(i.targetAmount)};if(s)a(await d(s.id,l)),r(null);else{let e={...l,savedAmount:0,createdAt:new Date().toISOString("T")[0]};t(await o(e))}c({name:"",targetAmount:"",category:"",deadline:""})};return(0,l.jsxs)("form",{onSubmit:u,className:"mb-6 space-y-4",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold",children:s?"Edit Goal":"Add a New Goal"}),(0,l.jsx)("input",{name:"name",value:i.name,onChange:m,placeholder:"Goal Name",required:!0,className:"w-full p-2 border rounded"}),(0,l.jsx)("input",{name:"targetAmount",type:"number",value:i.targetAmount,onChange:m,placeholder:"Target Amount",required:!0,className:"w-full p-2 border rounded"}),(0,l.jsx)("input",{name:"category",value:i.category,onChange:m,placeholder:"Category (e.g, Travel)",required:!0,className:"w-full p-2 border rounded"}),(0,l.jsx)("input",{name:"deadline",type:"date",value:i.deadline,onChange:m,required:!0,className:"w-full p-2 border rounded"}),(0,l.jsx)("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:s?"Update Goal":"Create Goal"}),s&&(0,l.jsx)("button",{type:"buuton",onClick:()=>{r(null),c({name:"",targetAmount:"",category:"",deadline:""})},className:"ml-2 text-sm text-red-500 hover:text-red-700",children:"Cancel"})]})}function m(e){let{goal:t,onDelete:a,onEdit:n}=e,{id:s,name:r,targetAmount:o,savedAmount:d,deadline:i,category:c}=t,m=Math.min(d/o*100,100).toFixed(2);return(0,l.jsxs)("div",{className:"border p-4 rounded shadow-sm bg-black",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-1",children:r}),(0,l.jsxs)("p",{className:"text-sm text-gray-600 mb-1",children:["Category: ",c]}),(0,l.jsxs)("p",{className:"text-sm text-gray-600 mb-1",children:["Deadline: ",i]}),(0,l.jsxs)("p",{className:"text-sm mb-1",children:["Saved: ",(0,l.jsxs)("strong",{children:["$",d]})," / $",o]}),(0,l.jsxs)("p",{className:"text-sm mb-3 text-red-600",children:["Remaining: $",o-d]}),(0,l.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-4",children:(0,l.jsx)("div",{className:"bg-green-500 h-3 rounded-full",style:{width:"".concat(m,"%")}})}),(0,l.jsxs)("p",{className:"text-xs text-gray-600 mb-2",children:["Progress: ",m,"%"]}),(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsx)("button",{onClick:()=>a(s),className:"text-red-500 hover:text-red-700 text-sm",children:"Delete"}),(0,l.jsx)("button",{onClick:()=>n(t),className:"text-blue-500 hover: text-blue-700 text-sm mr-4",children:"Edit"})]})]})}function u(e){var t;let{goals:a,onGoalUpdated:s}=e,[r,o]=(0,n.useState)((null==(t=a[0])?void 0:t.id)||""),[i,c]=(0,n.useState)(""),m=async e=>{e.preventDefault();let t=Number(i);if(!t||t<=0)return;let l=a.find(e=>e.id===r).savedAmount+t;s(await d(r,{savedAmount:l})),c("")};return(0,l.jsxs)("form",{onSubmit:m,className:"bg-gray-900 p-4 rounded mb-6",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold mb-3",children:"Deposit to a Goal"}),(0,l.jsx)("select",{className:"border bg-gray-900 p-2 rounded w-full mb-3",value:r,onChange:e=>o(e.target.value),children:a.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))}),(0,l.jsx)("input",{type:"number",className:"border p-2 rounded w-full mb-3",placeholder:"Amount to deposit",value:i,onChange:e=>c(e.target.value),required:!0,min:1}),(0,l.jsx)("button",{type:"submit",className:"bg-green-600 text-white py-2 px-4 rounded hover:bg-green-700",children:"Deposit"})]})}function h(e){let{goals:t}=e,a=t.length,n=t.reduce((e,t)=>e+t.savedAmount,0),s=t.filter(e=>e.savedAmount>=e.targetAmount).length,r=new Date,o=t.filter(e=>{let t=(new Date(e.deadline)-r)/864e5;return t<=30&&t>=0&&e.savedAmount<e.targetAmount}),d=t.filter(e=>new Date(e.deadline)<r&&e.savedAmount<e.targetAmount);return(0,l.jsxs)("section",{className:"bg-gray-900 p-4 rounded mb-6",children:[(0,l.jsx)("h2",{className:"text-lg font-bold mb-4",children:"Overview"}),(0,l.jsxs)("p",{children:["Total Goals: ",(0,l.jsx)("strong",{children:a})]}),(0,l.jsxs)("p",{children:["Total Saved: ",(0,l.jsx)("strong",{children:n})]}),(0,l.jsxs)("p",{children:["Completed Goals: ",(0,l.jsx)("strong",{children:s})]}),o.length>0&&(0,l.jsxs)("div",{className:"mt-3 text-yellow-700",children:["⚠️ Goals near deadline:",(0,l.jsx)("ul",{className:"list-disc pl-6",children:o.map(e=>(0,l.jsxs)("li",{children:[e.name," (Deadline: ",e.deadline,")"]},e.id))})]}),d.length>0&&(0,l.jsxs)("div",{className:"mt-3 text-red-700",children:["❗Overdue goals:",(0,l.jsx)("ul",{className:"list-disc pl-6",children:d.map(e=>(0,l.jsxs)("li",{children:[e.name," (Deadline: ",e.deadline,")"]},e.id))})]})]})}function x(){let[e,t]=(0,n.useState)([]),[a,s]=(0,n.useState)(null);(0,n.useEffect)(()=>{r().then(t).catch(e=>console.error("Error loading goals:",e))},[]);let o=async e=>{await i(e),t(t=>t.filter(t=>t.id!==e))},d=e=>{t(t=>t.map(t=>t.id===e.id?e:t))};return(0,l.jsxs)("main",{className:"p-6 max-w-3xl mx-auto",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Smart Goal Planner"}),(0,l.jsx)(c,{onGoalAdded:e=>{t(t=>[...t,e])},onGoalUpdated:d,editGoal:a,setEditGoal:s}),(0,l.jsx)(h,{goals:e,onGoalUpdated:d}),(0,l.jsx)(u,{goals:e,onGoalUpdated:d}),0===e.length?(0,l.jsx)("p",{children:"No goals yet. Start by adding one!"}):(0,l.jsx)("ul",{className:"space-y-4",children:e.map(e=>(0,l.jsx)("li",{className:"border p-4 rounded shadow-sm",children:(0,l.jsx)(m,{goal:e,onDelete:o,onEdit:s})},e.id))})]})}},6350:(e,t,a)=>{Promise.resolve().then(a.bind(a,2222))}},e=>{e.O(0,[441,964,358],()=>e(e.s=6350)),_N_E=e.O()}]);